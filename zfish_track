function x = zfish_track(y)
% This function will take as input a matrix of filtered intensity values of video frames, then return velocity over time.
% y must be a video
  
  if numel(y) == 1 % Ensures y input is not simply an image
    disp('Please input a video, not a still image.')
    return
  else
  end
  
  centroids = zeros(numel(y),2) % Pre-allocates space for x-y coordinates of object centroid
  for i = 1:numel(y)
    y_im = imread(y,i);
    stats = regionprops(y_im, 'Centroid');
    centroids(i,:) = stats.Centroid;
  end
  
  bin_img = im2bw(y_im);
  mat = regionprops(bin_img);
  obj = length(mat.Centroid);
  dist = zeros(obj,frames)); % Pre-allocates matrix for efficiency
  for i = 2:y.NumberOfFrames % Cycles through number of frames (Besides first. Distance from first frame would always be 0)
    for k = 1:obj % Cycles through number of identified zebrafish
      [xi,yi] = mat.Centroid{k,i}
      [xb4,yb4] = mat.Centroid{k, i-1}
      dist(k,i) = sqrt((xi - xb4)^2 + (yi - yb4)^2);
      velo(k,i) = dist(k,i)/t(i); % Velocity is distance over time. Time defined via frame speed
    end
  end
end
      
